<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../../../../template/templatePadrao.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="content">
        <p:panel header="Lista de Orientações">
            <h:inputHidden 
                id="ihOrientacao"
                value="#{curriculoBean.curriculo}" 
                converter="curriculoConversor"/>

            <p:commandButton value="Voltar" action="/cadastro/curriculo/listar.xhtml" />

            <h:form id="Orientacao">  

                <p:messages showDetail="true" showSummary="true"/>  

                <p:panel header="Nova Orientação">  

                    <h:panelGrid columns="6" id="grid" cellspacing="4">  
                        
                        <h:outputText value="Tipo de Orientação: *" />
                        <p:selectOneMenu required="true" id="tBolsa" value="#{curriculoBean.orientacao.tipoOrientacao}">  
                            <f:selectItem itemLabel="Tese Doutorado (Orientação)" itemValue="8" />  
                            <f:selectItem itemLabel="Dissertação de Mestrado (Orientação)" itemValue="4" />  
                            <f:selectItem itemLabel="Especialização (Orientação)" itemValue="2" />  
                            <f:selectItem itemLabel="Iniciação Científica (Orientação)" itemValue="2" />  
                            <f:selectItem itemLabel="TCC (Orientação)" itemValue="2" />  
                            <f:selectItem itemLabel="Bolsista DTI (Orientação)" itemValue="2" />  
                            <f:selectItem itemLabel="Tese de Doutorado (Coorientação)" itemValue="4" />  
                            <f:selectItem itemLabel="Dissertação de Mestrado (Coorientação)" itemValue="2" />  
                        </p:selectOneMenu>
                        
                        <h:outputLabel value="Nome Bolsista : *"/> 
                        <p:inputText id="Bolsista"   
                                     value="#{curriculoBean.orientacao.aluno}" required="true"/>  

                        <h:outputLabel value="Período Inicial : *" />  
                        <p:inputText id="periodoInicial" required="true"   
                                     value="#{curriculoBean.orientacao.PInicial}" />  


                        <h:outputLabel value="Período Final : *"/>  
                        <p:inputText value="#{curriculoBean.orientacao.PInicial}"
                                     id="periodoFinal" required="true"/>
                        
                        <h:outputText value="Tipo de Bolsa: *" />
                        <p:selectOneMenu required="true" id="tBolsa" value="#{curriculoBean.orientacao.tipoBolsa}">  
                            <f:selectItem itemLabel="PIBIC/UFRA-AF" itemValue="UFRA-AF" />  
                            <f:selectItem itemLabel="PIBIC/UFRA" itemValue="UFRA" />  
                            <f:selectItem itemLabel="CNPq-AF" itemValue="CNPQ-AF" />  
                            <f:selectItem itemLabel="CNPq" itemValue="CNPQ" />  
                            <f:selectItem itemLabel="FAPESPA" itemValue="FAPESPA" />  
                        </p:selectOneMenu>

                        <p:commandButton value="Limpar" type="reset"/>  
                        <p:commandButton id="btn_add" value="Adicionar"
                                         ajax="false"
                                         action="#{curriculoBean.salvarOrientacao()}"
                                         update="orientacoesTabela"/>

                    </h:panelGrid>  
                </p:panel>  

                <br/>
                <p:dataTable id="orientacoesTabela" 
                             value="#{curriculoBean.curriculo.orientacaoList}" var="orientacao"
                             emptyMessage="Sem registro para a exibição."
                             paginator="true" rows="5" 
                             rowsPerPageTemplate="5,10,15"
                             editable="true">

                    <p:ajax event="rowEdit" listener="#{curriculoBean.salvarEditarOrientacao(orientacao)}" update="orientacoesTabela" />  

                    <p:column headerText="Bolsista"
                              style="max-width: 110px;min-width: 110px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line">

                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{orientacao.aluno}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{orientacao.aluno}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor> 
                    </p:column>  

                    <p:column headerText="Período Inicial"
                              style="max-width: 110px;min-width: 110px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line"> 
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{orientacao.PInicial}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{orientacao.PInicial}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor> 
                    </p:column>

                    <p:column headerText="Período Final"
                              style="max-width: 110px;min-width: 110px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line"> 
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{orientacao.PFinal}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{orientacao.PFinal}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor> 
                    </p:column>

                    <p:column headerText="Tipo de Bolsa"
                              style="max-width: 110px;min-width: 110px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line"> 
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{orientacao.tipo}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{orientacao.tipo}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor> 
                    </p:column>

                    <p:column headerText="Pontuação"
                              style="max-width: 95px;min-width: 95px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line">
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{orientacao.estrato}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{orientacao.estrato}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor>
                    </p:column> 

                    <p:column headerText="Editar" style="width:38px">  
                        <p:rowEditor />  
                    </p:column>

                    <p:column headerText="Operação" style="max-width: 95px;min-width: 95px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line">  

                        <p:commandLink value="Excluir"
                                       ajax="false"
                                       action="/cadastro/curriculo/producao/orientacao/excluirOrientacao.xhtml"
                                       >
                            <f:setPropertyActionListener 
                                value="#{orientacao}" 
                                target="#{curriculoBean.orientacao}" />
                        </p:commandLink>  

                    </p:column>

                    <!--                    <p:column headerText="Incluir" style="max-width: 105px;min-width: 105px; 
                                                  overflow: hidden;  max-height: 12px; 
                                                  min-height: 12px; white-space: pre-line">  
                                            <p:commandLink value="Comprovação" ajax="false" update="orientacoesTabela"
                                                           action="uploadOrientacao.xhtml">  
                                                <f:setPropertyActionListener 
                                                    value="#{orientacao}" 
                                                    target="#{curriculoBean.orientacao}" />
                                            </p:commandLink>
                    
                                        </p:column>-->

                </p:dataTable>  

            </h:form>  

        </p:panel>

    </ui:define>

</ui:composition>
