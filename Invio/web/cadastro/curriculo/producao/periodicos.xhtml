<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../../../template/templatePadrao.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="content">
        <p:panel header="Lista de Periódicos">
            <!--            <p:commandButton value="Voltar" action="/cadastro/curriculo/listar.xhtml" />-->

            <h:form id="Periodico" acceptcharset="ISO-8859-1" >  

                <p:messages showDetail="true" showSummary="true"/>  

                <p:panel header="Novo Periódico">  
                    <h:panelGrid columns="6" id="grid" cellspacing="4"> 

                        <h:outputLabel value="Título : *"/> 
                        <p:inputText id="Titulo"  
                                     value="#{periodicoBean.periodico.titulo}" 
                                     required="false"/>  

                        <h:outputLabel value="Autor : *" />  
                        <p:inputText 
                            id="Autor"
                            required="false"   
                            value="#{periodicoBean.periodico.autores}" />  


                        <h:outputLabel value="Ano Publicação : *"/>  
                        <p:inputMask  value="#{periodicoBean.periodico.ano}" mask="9999"
                                      id="DataPublicacao" required="false"/>

                        <h:outputLabel value="Revista : " />  
                        <p:autoComplete 
                            id="Revista" 
                            scrollHeight="100" 
                            value="#{periodicoBean.periodico.revista}"   
                            completeMethod="#{periodicoBean.complete}"/>

                        <h:outputLabel value="Volume : " for="volume"/> 
                        <p:inputText id="Volume" required="false"   
                                     value="#{periodicoBean.periodico.volume}" />  

                        <h:outputLabel value="Página Incial: " for="paginaI"/>  
                        <p:inputText id="PaginaI" required="false" size="2"   
                                     value="#{periodicoBean.periodico.paginainicial}" />  

                        <h:outputLabel value="Página Final: " for="paginaF"/>  
                        <p:inputText id="PaginaF" required="false" size="2"   
                                     value="#{periodicoBean.periodico.paginafinal}" />  

                        <h:outputLabel value="DOI: " for="doi"/>  
                        <p:inputText 
                            id="Doi" 
                            required="false"
                            maxlength="30"
                            value="#{periodicoBean.periodico.doi}" />  

                        <h:outputLabel value="JCR: " for="jcr"/>  
                        <p:inputText id="Jcr" required="false"
                                     value="#{periodicoBean.periodico.jcr}" />  

                        <p:commandButton value="Limpar" type="reset"/>  
                        <p:commandButton 
                            id="btn_add" 
                            value="Adicionar"
                            ajax="false"
                            action="#{periodicoBean.salvarPeriodico}"
                            update=":periodicosTabela"/>

                    </h:panelGrid>  
                </p:panel>  

                <br/>
                <p:dataTable id="periodicosTabela" 
                             value="#{periodicoBean.periodicos}" 
                             var="periodico"
                             emptyMessage="Sem registro para a exibição."
                             paginator="true" rows="5" 
                             rowsPerPageTemplate="5,10,15"
                             editable="true">

                    <p:ajax 
                        event="rowEdit" 
                        listener="#{periodicoBean.salvarEditarPeriodico(periodico)}" 
                        update="periodicosTabela" />  

                    <p:column headerText="Título"
                              style="max-width: 110px;min-width: 110px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line">

                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{periodico.titulo}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{periodico.titulo}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor> 
                    </p:column>  

                    <p:column headerText="Autor"
                              style="max-width: 110px;min-width: 110px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line"> 
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{periodico.autores}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{periodico.autores}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor> 
                    </p:column>

                    <p:column headerText="Revista"
                              style="max-width: 110px;min-width: 110px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line"> 
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{periodico.revista}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{periodico.revista}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor> 
                    </p:column>

                    <p:column headerText="Ano"
                              style="max-width: 65px;min-width: 65px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line"> 
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{periodico.ano}">
                                </h:outputLabel> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputMask mask="9999" value="#{periodico.ano}" style="width: 90%">
                                </p:inputMask>
                            </f:facet> 
                        </p:cellEditor> 
                    </p:column>


                    <p:column headerText="Volume"
                              style="max-width: 95px;min-width: 95px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line"> 
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{periodico.volume}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{periodico.volume}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor> 
                    </p:column>

                    <p:column headerText="Página Inicial"
                              style="max-width: 95px;min-width: 95px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line"> 
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{periodico.paginainicial}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{periodico.paginainicial}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor> 
                    </p:column>

                    <p:column headerText="Página Final"
                              style="max-width: 95px;min-width: 95px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line"> 
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{periodico.paginafinal}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{periodico.paginafinal}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor> 
                    </p:column>

                    <p:column headerText="JCR"
                              style="max-width: 95px;min-width: 95px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line"> 
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{periodico.jcr}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{periodico.jcr}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor> 
                    </p:column>

                    <p:column headerText="Pontuação"
                              style="max-width: 95px;min-width: 95px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line">
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputLabel value="#{periodico.estrato}"/> 
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{periodico.estrato}" style="width: 90%"/>
                            </f:facet> 
                        </p:cellEditor>
                    </p:column>  

                    <p:column headerText="Editar" style="width:38px">  
                        <p:rowEditor />  
                    </p:column>

                    <p:column headerText="Operação" style="max-width: 95px;min-width: 95px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line">  

                        <p:commandLink value="Excluir"
                                       ajax="false"
                                       action="/cadastro/curriculo/producao/excluirPeriodico.xhtml">
                            <f:setPropertyActionListener 
                                value="#{periodico}" 
                                target="#{periodicoBean.periodico}" />
                        </p:commandLink>  

                    </p:column>

                    <p:column headerText="Incluir" style="max-width: 105px;min-width: 105px; 
                              overflow: hidden;  max-height: 12px; 
                              min-height: 12px; white-space: pre-line">  
                        <p:commandLink value="Comprovação" ajax="false" update="periodicosTabela"
                                       action="uploadPeriodico.xhtml">  
                            <f:setPropertyActionListener 
                                value="#{periodico}" 
                                target="#{periodicoBean.periodico}" />
                        </p:commandLink>

                    </p:column>

                    <f:facet name="footer">
                        Total em Periódicos: 
                        <h:outputLabel value="#{periodicoBean.total}"/>
                    </f:facet>

                </p:dataTable>  

            </h:form>  

        </p:panel>

    </ui:define>

</ui:composition>
