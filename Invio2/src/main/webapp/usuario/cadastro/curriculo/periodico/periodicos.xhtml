<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/publico/template/templatePadrao.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">
    <ui:define name="content">
        <p:panel header="Lista de Periódicos">
            <p:messages id="message" showDetail="true" showSummary="true"/>  
            <h:form id="Periodico">  
                *ATENÇÃO: Não colar conteúdo Revista de outro local para adicionar no campo revista. 

                <p:panel header="Novo Periódico">  
                    <h:panelGrid columns="4" id="grid" cellspacing="4"> 

                        <h:outputText value="Autor(es) : *" />  
                        <p:inputText 
                            id="Autor"
                            maxlength="400"
                            required="false"   
                            value="#{periodicoBean.periodico.autores}" />  

                        <h:outputLabel value="Título : *"/> 
                        <p:inputText 
                            id="Titulo"  
                            maxlength="400"
                            value="#{periodicoBean.periodico.titulo}" 
                            required="false"/>  

                        <h:outputLabel value="Revista : " />  
                        <p:autoComplete 
                            id="Revista" 
                            scrollHeight="100" 
                            value="#{periodicoBean.periodico.revista}"   
                            completeMethod="#{periodicoBean.complete}"/>

                        <h:outputLabel value="Ano de Publicação : *"/>  
                        <p:inputMask  value="#{periodicoBean.periodico.ano}" mask="9999"
                                      id="DataPublicacao" required="false"/>

                        <h:outputLabel value="Volume : " for="volume"/> 
                        <p:inputText id="volume" 
                                     maxlength="45"
                                     required="false"   
                                     value="#{periodicoBean.periodico.volume}" />  

                        <h:outputLabel value="DOI: " for="doi"/>  
                        <p:inputText 
                            id="doi" 
                            required="false"
                            maxlength="30"
                            value="#{periodicoBean.periodico.doi}" />  

                        <h:outputLabel value="JCR: " for="jcr"/>  
                        <p:inputText id="jcr" 
                                     maxlength="200"
                                     required="false"
                                     value="#{periodicoBean.periodico.jcr}" />  

                        <h:outputLabel value="Página Incial: " for="paginaI"/>  
                        <p:inputText id="paginaI" 
                                     maxlength="11"
                                     required="false" 
                                     size="2"   
                                     value="#{periodicoBean.periodico.paginainicial}" />  

                        <h:outputLabel value="Página Final: " for="paginaF"/>  
                        <p:inputText id="paginaF"
                                     maxlength="11"
                                     required="false"
                                     size="2"
                                     value="#{periodicoBean.periodico.paginafinal}" />

                        <p:commandButton value="Limpar" type="reset"/>  

                        <p:commandButton 
                            id="btn_add" 
                            value="Adicionar"
                            ajax="false"
                            action="#{periodicoBean.salvarPeriodico}"/>
                    </h:panelGrid>  
                </p:panel>  
            </h:form>

            <br/>
            <h:form>
                <p:dataTable id="periodicosTabelaAtuais" 
                             value="#{periodicoBean.periodicosAtuais}" 
                             var="periodico"
                             emptyMessage="Sem registro para a exibição."
                             paginator="true" rows="5" 
                             rowsPerPageTemplate="5,10,15">

                    <p:column headerText="Título">
                        <h:outputLabel value="#{periodico.titulo}"/> 
                    </p:column>  

                    <p:column headerText="Autor"> 
                        <h:outputLabel value="#{periodico.autores}"/> 
                    </p:column>

                    <p:column headerText="Revista"> 
                        <h:outputLabel value="#{periodico.revista}"/> 
                    </p:column>

                    <p:column headerText="Ano"> 
                        <h:outputLabel value="#{periodico.ano}"/>
                    </p:column>

                    <p:column headerText="Volume"> 
                        <h:outputLabel value="#{periodico.volume}"/> 
                    </p:column>

                    <p:column headerText="Página Inicial"> 
                        <h:outputLabel value="#{periodico.paginainicial}"/> 
                    </p:column>

                    <p:column headerText="Página Final"> 
                        <h:outputLabel value="#{periodico.paginafinal}"/> 
                    </p:column>

                    <p:column headerText="JCR"> 
                        <h:outputLabel value="#{periodico.jcr}"/> 
                    </p:column>

                    <p:column headerText="Pontuação">
                        <h:outputLabel value="#{periodico.estrato}"/> 
                    </p:column>  

                    <p:column headerText="Operação">  
                        <p:commandButton 
                            icon="ui-icon-trash"
                            title="Excluir"
                            update="periodicosTabelaAtuais :message"
                            action="#{periodicoBean.excluirPeriodico}">
                            <f:setPropertyActionListener
                                value="#{periodico}"
                                target="#{periodicoBean.periodico}"/>
                            <p:confirm header="Mensagem" message="Você tem certeza?" icon="ui-icon-alert"/>
                        </p:commandButton> 
                    </p:column>

                    <f:facet name="footer">
                        Total em Periódicos: 
                        <h:outputLabel value="#{periodicoBean.total}"/>
                    </f:facet>
                </p:dataTable>  

                <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">
                    <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                    <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                </p:confirmDialog>
            </h:form>
        </p:panel>
    </ui:define>
</ui:composition>
